<div class="container">

  <div class="p-grid">
      <div class="p-col-2">
          <app-resumo [pedido]="pedido"></app-resumo>
      </div>

      <div class="p-col-10">
        <form *ngIf="pagamento.situacao !== 'CRIADO'" #pagamentoForm="ngForm" (ngSubmit)="criaPagamento()">
          <h3>Dados do pagamento</h3>
          <div class="p-grid">
            
            <div class="p-col-12">
              <label for="formaDePagamento">Forma de pagamento</label>
            </div>
            <!--div class="p-col-12" style="margin: -5px 1px">
              <p-dropdown required id="formaDePagamento" name="formaDePagamento"
                  [options]="formasDePagamento" [(ngModel)]="pagamento.formaDePagamento"></p-dropdown>
            </div-->
              <select class="p-col-12" class="form-control" required id="formaDePagamento" name="formaDePagamento" [(ngModel)]="pagamento.formaDePagamento">
                <option *ngFor="let forma of formasDePagamento" [ngValue]="forma">{{ forma.nome }}</option>
              </select>

            <div class="p-col-12">
              <label for="nome">Nome no cartão</label>
            </div>
            <div class="p-col-12" style="margin: -5px 1px">
              <input pInputText class="form-control" pInputText required id="nome" name="nome" 
                [(ngModel)]="pagamento.nome" placeholder="nome como impresso no cartão">
            </div>

            <div class="p-col-12">
              <label for="numero">Número do cartão</label>
            </div>
            <div class="p-col" style="margin: -5px 1px">
              <input pInputText class="form-control" required id="numero" name="numero" 
                [(ngModel)]="pagamento.numero"
                placeholder="0000 0000 0000 0000" >
            </div>

            <div class="p-col-12">
              <label for="expiracao">Data de expiração</label>
            </div>
            <div class="p-col-12" style="margin: -5px 1px">
              <input pInputText class="form-control" type="month" required id="expiracao" name="expiracao" 
                [(ngModel)]="pagamento.expiracao">
            </div>

            <div class="p-col-12">
              <label for="codigo">Código de Segurança</label>
            </div>
            <div class="p-col-12" style="margin: -5px 1px">
              <input pInputText class="form-control" required id="codigo" name="codigo" 
                [(ngModel)]="pagamento.codigo"
                placeholder="000" >
            </div>

            <div class="p-grid p-col-12" style="margin: 10px -1px">
              <button pButton *ngIf="!pagamento.situacao" type="submit" 
                label="Criar pagamento"></button>
            </div>
            
          </div>
        </form>
        <div *ngIf="pagamento.situacao === 'CRIADO'">
          <dl>
            <dt>Cartão</dt>
            <dd>{{ pagamento.numero.substring(0, 5) }} XXXX XXXX XXXX</dd>
            <dt>Valor</dt>
            <dd>{{ pedido.total | currency:'BRL' }}</dd>
          </dl>
          <div class="p-grid" style="margin: 5px">
            <div class="p-col-12" style="margin: 5px">
              <button pButton (click)="confirmaPagamento()" label="Confirmar pagamento" 
                  style="margin-right: 10px"></button>
              <button pButton (click)="cancelaPagamento()" label="Cancelar pagamento"></button>
            </div>
          </div>
        </div>
      </div>

  </div>

</div>
  